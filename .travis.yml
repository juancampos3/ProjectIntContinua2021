os:
  - linux
language: php
dist: trusty
php:
  - '8.0'
services:
  - docker
  - mysql
before_install:
  - mysql -e 'CREATE DATABASE IF NOT EXISTS laravel;'
jobs:
  include:
    - stage: "Tests"                
      name: "Unit Test PHP"  
      script: 
      - cd app
      - travis_retry composer self-update
      - travis_retry composer install --prefer-source --no-interaction
      - cp .env.example .env
      - php artisan key:generate
      - php artisan migrate
      - php artisan test